## Минимум для запуска:
## - TELEGRAM_BOT_TOKEN
## - ADMIN_USERNAME (первый админ, без @)
##
## Важно про ADMIN_USERNAME:
## Telegram не даёт надёжно получить numeric user_id по username.
## Поэтому бот "выучит" user_id, когда этот пользователь впервые напишет боту (/start),
## и сохранит его в БД как администратора.

# Telegram bot token (из BotFather)
TELEGRAM_BOT_TOKEN=

# Первый админ (username без @), например: admin1
ADMIN_USERNAME=

# Optional / advanced admin configs (backward-compatible):
# Если заданы, работают вместе с управлением админами через команды бота:
# /add_admin, /remove_admin, /list_admins
# ADMIN_CHAT_ID=
# ADMIN_TELEGRAM_IDS=123,456
# ADMIN_USERNAMES=admin1,admin2

# Database
# По умолчанию SQLite в ./data/app.db
DATABASE_URL=sqlite:///./data/app.db

# RouterOS API
# Обязательно для работы с MikroTik (RouterOS API: 8728 / 8729)
MIKROTIK_HOST=
MIKROTIK_PORT=8728
MIKROTIK_USE_SSL=false
MIKROTIK_USERNAME=
MIKROTIK_PASSWORD=

# VPN / 2FA behavior
# Частота опроса роутера (сек)
POLL_INTERVAL_SECONDS=5
# Требовать подтверждение 2FA при обнаружении подключения
REQUIRE_CONFIRMATION=true
# Таймаут ожидания подтверждения (сек)
CONFIRMATION_TIMEOUT_SECONDS=300
# Повтор отправки сообщения 2FA каждые N секунд (0 = не повторять)
CONFIRMATION_RESEND_SECONDS=60
# Максимум повторов 2FA (0 = не повторять)
CONFIRMATION_MAX_RESENDS=3
# Через сколько отключать доступ после того как роутер "потерял" сессию (сек).
# 0 = отключать сразу.
DISCONNECT_GRACE_SECONDS=30
# Длительность сессии по умолчанию (часы)
SESSION_DURATION_HOURS=24

# Strictly detect connections via User Manager sessions (no PPP fallback)
# Сейчас поддерживается только user_manager (по вашему требованию)
SESSION_SOURCE=user_manager

# Optional: firewall rule selection by comment substring
# Префикс, по которому бот будет искать правило (comment contains "<prefix> <mikrotik_username>")
FIREWALL_COMMENT_PREFIX=2FA

